// constants.js - BLE 상수 정의

// -----------------------------------------
// IoT 모드 UUID
// -----------------------------------------
// BLE Service UUIDs
export const IOT_SERVICE = '11112222-3333-4444-5555-666677778888';
export const SENSOR_SERVICE = '11112222-3333-4444-5555-66667777888c';

// 캐릭터리스틱 UUID 상수 - 직접 접근용
export const LED_CHARACTERISTIC = '11112222-3333-4444-5555-666677778889';
export const CAM_CHARACTERISTIC = '11112222-3333-4444-5555-66667777888a';
export const ULTRA_CHARACTERISTIC = '11112222-3333-4444-5555-66667777888b';
export const DHT_CHARACTERISTIC = '11112222-3333-4444-5555-66667777888d';
export const SERVO_CHARACTERISTIC = '11112222-3333-4444-5555-66667777888e';
export const NEOPIXEL_CHARACTERISTIC = '11112222-3333-4444-5555-66667777888f';
export const TOUCH_CHARACTERISTIC = '11112222-3333-4444-5555-666677778890';
export const LIGHT_CHARACTERISTIC = '11112222-3333-4444-5555-666677778891';
export const BUZZER_CHARACTERISTIC = '11112222-3333-4444-5555-666677778892';
export const REPL_CHARACTERISTIC = '11112222-3333-4444-5555-666677778893';
export const GYRO_CHARACTERISTIC = '11112222-3333-4444-5555-666677778894';

// -----------------------------------------
// REPL 모드 UUID
// -----------------------------------------
export const REPL_SERVICE = '6e400001-b5a3-f393-e0a9-e50e24dcca9e';
export const REPL_TX_CHARACTERISTIC = '6e400003-b5a3-f393-e0a9-e50e24dcca9e'; // 보드→클라이언트
export const REPL_RX_CHARACTERISTIC = '6e400002-b5a3-f393-e0a9-e50e24dcca9e'; // 클라이언트→보드
export const REPL_CONTROL_CHARACTERISTIC = '6e400004-b5a3-f393-e0a9-e50e24dcca9e'; // 모드 제어

// -----------------------------------------
// 모드 식별 상수
// -----------------------------------------
export const BOARD_MODE = {
  IOT: 'IOT',
  REPL: 'REPL',
  UNKNOWN: 'UNKNOWN'
};

// -----------------------------------------
// 모드 전환 명령
// -----------------------------------------
export const MODE_COMMAND = {
  TO_IOT: 'REPL:OFF',
  TO_REPL: 'REPL:ON',
  STATUS: 'REPL:STATUS'
};

// sensorsModule.js에서 사용하는 객체 형태로도 내보내기
export const CHARACTERISTIC_UUIDS = {
    // IoT 모드 특성
    led: LED_CHARACTERISTIC,
    camera: CAM_CHARACTERISTIC,
    ultrasonic: ULTRA_CHARACTERISTIC,
    dht: DHT_CHARACTERISTIC,
    servo: SERVO_CHARACTERISTIC,
    neopixel: NEOPIXEL_CHARACTERISTIC,
    touch: TOUCH_CHARACTERISTIC,
    light: LIGHT_CHARACTERISTIC,
    buzzer: BUZZER_CHARACTERISTIC,
    repl: REPL_CHARACTERISTIC,
    gyro: GYRO_CHARACTERISTIC,
    
    // REPL 모드 특성
    replTx: REPL_TX_CHARACTERISTIC,
    replRx: REPL_RX_CHARACTERISTIC,
    replControl: REPL_CONTROL_CHARACTERISTIC
};

// 서비스별 포함 특성 매핑
export const SERVICE_CHARACTERISTICS = {
  [IOT_SERVICE]: [LED_CHARACTERISTIC, CAM_CHARACTERISTIC, REPL_CHARACTERISTIC],
  [SENSOR_SERVICE]: [ULTRA_CHARACTERISTIC, DHT_CHARACTERISTIC, SERVO_CHARACTERISTIC, 
                    NEOPIXEL_CHARACTERISTIC, TOUCH_CHARACTERISTIC, LIGHT_CHARACTERISTIC, 
                    BUZZER_CHARACTERISTIC, GYRO_CHARACTERISTIC],
  [REPL_SERVICE]: [REPL_TX_CHARACTERISTIC, REPL_RX_CHARACTERISTIC, REPL_CONTROL_CHARACTERISTIC]
};

// 하위 호환성을 위해 전역 변수로도 노출
window.IOT_SERVICE = IOT_SERVICE;
window.SENSOR_SERVICE = SENSOR_SERVICE;
window.LED_CHARACTERISTIC = LED_CHARACTERISTIC;
window.CAM_CHARACTERISTIC = CAM_CHARACTERISTIC;
window.ULTRA_CHARACTERISTIC = ULTRA_CHARACTERISTIC;
window.DHT_CHARACTERISTIC = DHT_CHARACTERISTIC;
window.SERVO_CHARACTERISTIC = SERVO_CHARACTERISTIC;
window.NEOPIXEL_CHARACTERISTIC = NEOPIXEL_CHARACTERISTIC;
window.TOUCH_CHARACTERISTIC = TOUCH_CHARACTERISTIC;
window.LIGHT_CHARACTERISTIC = LIGHT_CHARACTERISTIC;
window.BUZZER_CHARACTERISTIC = BUZZER_CHARACTERISTIC;
window.REPL_CHARACTERISTIC = REPL_CHARACTERISTIC;
window.GYRO_CHARACTERISTIC = GYRO_CHARACTERISTIC;
window.REPL_SERVICE = REPL_SERVICE;
window.REPL_TX_CHARACTERISTIC = REPL_TX_CHARACTERISTIC;
window.REPL_RX_CHARACTERISTIC = REPL_RX_CHARACTERISTIC;
window.REPL_CONTROL_CHARACTERISTIC = REPL_CONTROL_CHARACTERISTIC;
window.BOARD_MODE = BOARD_MODE;
window.MODE_COMMAND = MODE_COMMAND;
window.CHARACTERISTIC_UUIDS = CHARACTERISTIC_UUIDS;
window.SERVICE_CHARACTERISTICS = SERVICE_CHARACTERISTICS; 